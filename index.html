<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Do I need a Fractional Head of People?</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #f4f4f4;
        }
        .container {
            width: 90%;
            max-width: 600px;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px;
            margin-top: 20px;
        }
        .progress-bar {
            position: sticky;
            top: 0;
            background-color: #007bff;
            height: 5px;
            transition: width 0.4s ease;
        }
        h1, h2 {
            color: #333;
        }
        button {
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 10px 15px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #0056b3;
        }
        .hidden {
            display: none;
        }
        .results {
            display: none;
        }
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0,0,0,0.6);
            display: flex;
            justify-content: center;
            align-items: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s;
        }
        .modal-content {
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            width: 90%;
            max-width: 400px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="progress-bar" id="progress-bar"></div>
        <div id="landing" class="step">
            <h1>Do I need a Fractional Head of People?</h1>
            <h2>Take this assessment to find out!</h2>
            <button id="start-btn">Start</button>
        </div>

        <div id="about" class="step hidden">
            <h2>About This Assessment</h2>
            <ul>
                <li>Assess your current people systems.</li>
                <li>Identify potential risks and gaps.</li>
                <li>Receive tailored recommendations.</li>
            </ul>
            <p><strong>Privacy Note:</strong> We’ll email your results only if you choose.</p>
            <button id="next-to-assessment">Next</button>
        </div>

        <div id="assessment" class="step hidden">
            <h2 id="category-title"></h2>
            <p><strong>Rating Scale:</strong> 1 = Strongly Disagree, 2 = Slightly Disagree, 3 = Somewhat Agree, 4 = Mostly Agree, 5 = Strongly Agree</p>
            <div id="questions"></div>
            <button id="back-btn">Back</button>
            <button id="next-btn" disabled>Next</button>
            <p id="step-info"></p>
        </div>

        <div id="results" class="results hidden">
            <h2>Your Results</h2>
            <div id="result-tier"></div>
            <div id="overall-score"></div>
            <div id="top-risk-signals"></div>
            <div id="recommended-actions"></div>
            <button id="email-results-btn">Email me my 1-page action plan</button>
            <button id="restart-btn">Restart</button>
        </div>

        <div class="modal" id="lead-capture-modal">
            <div class="modal-content">
                <h3>Lead Capture</h3>
                <label for="first-name">First Name (optional):</label>
                <input type="text" id="first-name">

                <label for="email">Email (required):</label>
                <input type="email" id="email" required>

                <label>
                    <input type="checkbox" id="insights-checkbox" checked>
                    Send me occasional insights on people systems (max 1/month).
                </label>

                <button id="submit-email">Submit</button>
                <p id="success-message" class="hidden">Done — check your inbox.</p>
                <p><small>MVP: Email sending is disabled in this demo.</small></p>
            </div>
        </div>
    </div>

    <script>
        const questions = {
            "Clarity & Operating Model": [
                "Decisions get re-litigated because decision rights aren’t clear.",
                "Ownership is fuzzy, and multiple people think they’re responsible (or no one does).",
                "Roles have evolved, but expectations and success metrics haven’t been updated.",
                "Cross-team handoffs regularly break because who does what isn’t explicit."
            ],
            "Hiring & Ramp": [
                "We’ve had a costly mishire in the last 6–9 months (or we’re worried we’re close).",
                "New hires take longer than 60–90 days to become meaningfully productive.",
                "Interviewing is inconsistent and different interviewers evaluate different things.",
                "Onboarding quality varies widely by manager or team."
            ],
            "Managers & Performance": [
                "Managers avoid hard conversations, so issues linger too long.",
                "High performers are carrying too much because low performance isn’t addressed quickly.",
                "Great performance isn’t clearly defined by role, level, or function.",
                "Managers need more support coaching, feedback, delegation, and prioritization."
            ],
            "Retention & Culture": [
                "We’ve lost, or nearly lost, a key employee unexpectedly in the last 12 months.",
                "We don’t have a reliable way to understand why people stay or leave.",
                "Recognition and growth opportunities feel inconsistent across teams.",
                "Culture and communication feel different depending on which leader you work for."
            ],
            "Risk & Foundations": [
                "We’re one people issue (performance, conflict, termination) away from chaos.",
                "Policies and processes are ad hoc or unclear, creating inconsistency and risk.",
                "People data (headcount, compensation, performance, attrition) is messy or not visible, so decisions are slower.",
                "Access, onboarding, or compliance workflows aren’t consistently controlled or documented."
            ]
        };

        const weights = {
            "Clarity & Operating Model": 0.25,
            "Hiring & Ramp": 0.20,
            "Managers & Performance": 0.25,
            "Retention & Culture": 0.15,
            "Risk & Foundations": 0.15
        };

        let currentStep = 0;
        const answers = {};
        const categories = Object.keys(questions);
        const totalSteps = categories.length;

        const progressBar = document.getElementById('progress-bar');
        const startBtn = document.getElementById('start-btn');
        const nextToAssessmentBtn = document.getElementById('next-to-assessment');
        const nextBtn = document.getElementById('next-btn');
        const backBtn = document.getElementById('back-btn');
        const resultsSection = document.getElementById('results');
        const emailResultsBtn = document.getElementById('email-results-btn');
        const leadCaptureModal = document.getElementById('lead-capture-modal');
        const submitEmailBtn = document.getElementById('submit-email');
        const emailInput = document.getElementById('email');
        const successMessage = document.getElementById('success-message');
        const restartBtn = document.getElementById('restart-btn');

        startBtn.addEventListener('click', () => {
            document.getElementById('landing').classList.add('hidden');
            document.getElementById('about').classList.remove('hidden');
        });

        nextToAssessmentBtn.addEventListener('click', () => {
            document.getElementById('about').classList.add('hidden');
            document.getElementById('assessment').classList.remove('hidden');
            loadAssessment();
        });

        backBtn.addEventListener('click', () => {
            if (currentStep > 0) {
                currentStep--;
                loadAssessment();
            }
        });

        nextBtn.addEventListener('click', () => {
            if (currentStep < totalSteps - 1) {
                currentStep++;
                loadAssessment();
            } else {
                calculateResults();
            }
        });

        submitEmailBtn.addEventListener('click', () => {
            if (validateEmail(emailInput.value)) {
                successMessage.classList.remove('hidden');
                // Simulate email sending
                console.log("Email would be sent to:", emailInput.value);
            }
        });

        restartBtn.addEventListener('click', () => {
            localStorage.clear();
            location.reload();
        });

        function loadAssessment() {
            const category = categories[currentStep];
            document.getElementById('category-title').innerText = category;
            document.getElementById('questions').innerHTML = '';
            questions[category].forEach((question, index) => {
                const questionId = `${category}${index + 1}`;
                document.getElementById('questions').innerHTML += `
                    <p>${question}</p>
                    <input type="radio" name="${questionId}" value="1" onchange="updateAnswers('${questionId}')"> 1 
                    <input type="radio" name="${questionId}" value="2" onchange="updateAnswers('${questionId}')"> 2 
                    <input type="radio" name="${questionId}" value="3" onchange="updateAnswers('${questionId}')"> 3 
                    <input type="radio" name="${questionId}" value="4" onchange="updateAnswers('${questionId}')"> 4 
                    <input type="radio" name="${questionId}" value="5" onchange="updateAnswers('${questionId}')"> 5 
                `;
            });

            // Restore previous answers if they exist
            questions[category].forEach((_, index) => {
                const questionId = `${category}${index + 1}`;
                const savedValue = answers[questionId];
                if (savedValue !== undefined) {
                    document.querySelector(`input[name="${questionId}"][value="${savedValue}"]`).checked = true;
                }
            });

            document.getElementById('step-info').innerText = `Step ${currentStep + 1} of ${totalSteps}`;
            progressBar.style.width = `${((currentStep + 1) / totalSteps) * 100}%`;
            nextBtn.disabled = !isCurrentStepAnswered();
        }

        function updateAnswers(questionId) {
            const value = document.querySelector(`input[name="${questionId}"]:checked`).value;
            answers[questionId] = Number(value);
            nextBtn.disabled = !isCurrentStepAnswered();
        }

        function isCurrentStepAnswered() {
            return questions[categories[currentStep]].every((_, index) => {
                const questionId = `${categories[currentStep]}${index + 1}`;
                return answers[questionId] !== undefined;
            }) || currentStep === totalSteps - 1; // Allow final step to proceed
        }

        function calculateResults() {
            const scores = {};
            let overallScore = 0;

            categories.forEach(category => {
                const total = questions[category].length;
                const categoryScore = Object.keys(answers)
                    .filter(q => q.startsWith(category))
                    .reduce((sum, q) => sum + answers[q], 0) / total * 100;
                scores[category] = categoryScore;
                overallScore += categoryScore * weights[category];
            });

            overallScore /= totalSteps;
            const tier = determineTier(overallScore, scores);
            displayResults(overallScore, tier, scores);
        }

        function determineTier(overallScore, scores) {
            if (scores["Risk & Foundations"] >= 80 || scores["Managers & Performance"] >= 85) return "Urgent";
            if (overallScore < 25) return "Not Yet";
            if (overallScore < 50) return "Soon";
            if (overallScore < 75) return "Yes";
            return "Urgent";
        }

        function displayResults(overallScore, tier, scores) {
            resultsSection.classList.remove('hidden');
            const tierMapping = {
                "Not Yet": {
                    title: "Not yet. You’re early, and that’s an advantage.",
                    summary: "You likely don’t need a fractional Head of People today. Your focus is establishing lightweight foundations that don’t slow you down.",
                    actions: [
                        "Define decision rights for the top 5 recurring decisions.",
                        "Create a simple onboarding checklist + 30/60/90 expectations for new hires.",
                        "Establish a basic manager cadence: weekly 1:1s and a monthly team retro."
                    ]
                },
                "Soon": {
                    title: "Soon, the cracks are showing.",
                    summary: "You’re starting to feel people drag: rework, slower ramp, inconsistent management. A fractional Head of People can help you prevent compounding issues.",
                    actions: [
                        "Clarify roles + ownership for the work that’s creating the most friction.",
                        "Standardize hiring + interviewing for 2–3 critical roles.",
                        "Implement a lightweight performance development system: clear expectations + monthly check-ins."
                    ]
                },
                "Yes": {
                    title: "Yes, people systems are now a growth constraint.",
                    summary: "Your answers show compounding leadership and execution friction. Fractional Head of People support will create clarity, reduce re-litigation, and improve ramp + accountability.",
                    actions: [
                        "Build a performance architecture: role expectations, coaching process, escalation paths.",
                        "Upgrade manager enablement: feedback, delegation, accountability norms.",
                        "Put in an operating cadence that scales: planning, metrics, and decision hygiene."
                    ]
                },
                "Urgent": {
                    title: "Urgent: you’re in people-risk territory.",
                    summary: "You’re likely experiencing active execution drag and elevated risk (manager breakdowns, unclear controls, or repeated misfires). You need near-term intervention to stabilize and scale.",
                    actions: [
                        "Run a 2–3 week 'People Systems Stabilization' sprint: roles, access, onboarding, risk gaps.",
                        "Address manager performance immediately: hard conversations, coaching, and clear standards.",
                        "Align incentives and accountability: define KPIs and tie leadership behavior to outcomes."
                    ]
                }
            };

            const result = tierMapping[tier];
            document.getElementById('result-tier').innerText = result.title;
            document.getElementById('overall-score').innerText = `Overall Score: ${overallScore.toFixed(2)}`;
            document.getElementById('top-risk-signals').innerHTML = `
                <h4>Top Risk Signals</h4>
                ${Object.entries(scores).sort((a, b) => b[1] - a[1]).slice(0, 3).map(([cat, score]) => `<p>${cat}: ${score.toFixed(2)}</p>`).join('')}
            `;
            document.getElementById('recommended-actions').innerHTML = `
                <h4>Recommended Actions</h4>
                <ol>
                    ${result.actions.map(action => `<li>${action}</li>`).join('')}
                </ol>
            `;
        }

        function validateEmail(email) {
            const regex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!regex.test(email)) {
                alert("Please enter a valid email address.");
                return false;
            }
            return true;
        }
    </script>
</body>
</html>
